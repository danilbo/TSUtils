<style>
  #performanceChart {
    display: inline-block;
    position: relative;
    width: 100%;
    margin: 10%;
  }
</style>

<div>
  <canvas id="performanceChart"></canvas>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

<script>

// create initial empty chart
var ctx_live = document.getElementById("performanceChart");
var performanceChart = new Chart(ctx_live, {
  type: 'line',
  data: {
    labels: [],
    datasets: [{
      data: [],
      borderWidth: 3,
      borderColor:'#00c0ef',
      label: 'CPU usage',
    },
    {
      data: [],
      borderWidth: 3,
      borderColor:'#FF0000',
      label: 'Memory usage',
    }
    ]
  },
  options: {
    responsive: true,
    title: {
      display: true,
      text: "Chart.js - Dynamically Update Chart Via Ajax Requests",
    },
    legend: {
      display: false
    },
    scales: {
      yAxes: [{
        ticks: {
          beginAtZero: false,
        }
      }]
    }
  }
});

// this post id drives the example data
var postId = 1;

// logic to get new data
var getData = function() {
  $.ajax({
    url: 'http://localhost:8000/api/v1/getData',
    success: function(data) {
      // process your data to pull out what you plan to use to update the chart
      // e.g. new label and a new data point
      
      // add new label and data point to chart's underlying data structures
      performanceChart.data.labels.push(postId++);
      performanceChart.data.datasets[0].data.push(data.cpuLoad);
      performanceChart.data.datasets[1].data.push(data.memory);

      // re-render the chart
      performanceChart.update();
    }
  });
};

// get new data every 5 seconds
setInterval(getData, 5000);</script>
 